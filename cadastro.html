<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Cadastro - Fluxo TCG</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body { background:#111; color:white; font-family:Arial; padding:20px; }
.card { background:#1e1e1e; padding:20px; border-radius:10px; margin-bottom:20px; }
input, button, select { width:100%; padding:10px; margin-top:10px; border:none; border-radius:6px; }
.btn { background:#444; color:white; }
.btn:hover { background:#555; }
.danger { background:#c62828; }

.catalogo {
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(180px,1fr));
  gap:15px;
}
.carta {
  background:#121212;
  padding:12px;
  border-radius:10px;
}
.carta h4 { margin:0 0 8px 0; color:#4fc3f7; }
</style>

<script src="personagens_fixos.js"></script>
<script src="personagens.js"></script>
</head>

<body>

<h2>Cadastro</h2>
<p><a href="index.html" style="color:#4fc3f7;">‚Üê Voltar</a></p>

<div class="card">
<h3>üìò Cat√°logo de Personagens Fixos</h3>
<div id="catalogo" class="catalogo"></div>
</div>

<div class="card">
<h3>Novo Personagem</h3>
<input id="nome" placeholder="Nome">
<input id="dano" type="number" placeholder="Dano">
<input id="vida" type="number" placeholder="Vida">
<input id="agilidade" type="number" placeholder="Agilidade">
<button class="btn" onclick="criar()">Cadastrar</button>
</div>

<div class="card">
<h3>Editar / Excluir Personagem Custom</h3>
<select id="lista" size="6" onchange="selecionar()"></select>
<input id="eNome">
<input id="eDano" type="number">
<input id="eVida" type="number">
<input id="eAgilidade" type="number">
<button class="btn" onclick="salvar()">Salvar</button>
<button class="btn danger" onclick="excluir()">Excluir</button>
</div>

<script>
let selecionado = null;

function carregarCatalogo() {
    catalogo.innerHTML = "";
    PERSONAGENS_FIXOS.forEach(p => {
        catalogo.innerHTML += `
        <div class="carta">
            <h4>${p.nome}</h4>
            ‚öîÔ∏è Dano: ${p.dano}<br>
            ‚ù§Ô∏è Vida: ${p.vida}<br>
            ‚ö° Agilidade: ${p.agilidade}
        </div>`;
    });
}

function carregarLista() {
    lista.innerHTML = "";
    getPersonagens().filter(p => p.id >= 1000).forEach(p => {
        lista.innerHTML += `<option value="${p.id}">${p.nome}</option>`;
    });
}

function criar() {
    adicionarPersonagem({
        nome: nome.value,
        dano: +dano.value,
        vida: +vida.value,
        agilidade: +agilidade.value
    });
    nome.value = dano.value = vida.value = agilidade.value = "";
    carregarLista();
}

function selecionar() {
    const p = getPersonagens().find(p => p.id == lista.value);
    if (!p) return;
    selecionado = p.id;
    eNome.value = p.nome;
    eDano.value = p.dano;
    eVida.value = p.vida;
    eAgilidade.value = p.agilidade;
}

function salvar() {
    if (!selecionado) return;
    editarPersonagem(selecionado, {
        nome: eNome.value,
        dano: +eDano.value,
        vida: +eVida.value,
        agilidade: +eAgilidade.value
    });
    carregarLista();
}

function excluir() {
    if (!selecionado) return;
    removerPersonagem(selecionado);
    selecionado = null;
    carregarLista();
}

document.addEventListener("DOMContentLoaded", () => {
    carregarCatalogo();
    carregarLista();
});
</script>

</body>
</html>
